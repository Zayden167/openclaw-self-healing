# OpenClaw Self-Healing System Environment Variables (v3.1)
# Copy this file to ~/.openclaw/.env and fill in your values
#
# v3.1 Changes:
# - Added complete Watchdog configuration (Level 2)
# - Added OPENCLAW_GATEWAY_PORT and OPENCLAW_GATEWAY_TOKEN
# - Added Level 3 escalation timing control

# ============================================
# Notifications (Optional)
# ============================================

# Discord Webhook
# Get your webhook URL from Discord: Server Settings > Integrations > Webhooks
# If not set, Discord notifications will be disabled
DISCORD_WEBHOOK_URL="https://discord.com/api/webhooks/YOUR_WEBHOOK_ID/YOUR_WEBHOOK_TOKEN"

# Telegram Bot (NEW in v2.0)
# 1. Create bot via @BotFather â†’ Get bot token
# 2. Get your chat ID via @userinfobot
# If not set, Telegram notifications will be disabled
TELEGRAM_BOT_TOKEN="YOUR_BOT_TOKEN"
TELEGRAM_CHAT_ID="YOUR_CHAT_ID"

# ============================================
# Gateway Configuration
# ============================================

# OpenClaw Gateway URL (default: http://localhost:18789/)
OPENCLAW_GATEWAY_URL="http://localhost:18789/"

# OpenClaw Gateway Port (default: 18789)
OPENCLAW_GATEWAY_PORT=18789

# OpenClaw Gateway Token (optional, for authenticated access)
# OPENCLAW_GATEWAY_TOKEN="your_gateway_token"

# Memory directory for logs and reports (default: $HOME/openclaw/memory)
OPENCLAW_MEMORY_DIR="$HOME/openclaw/memory"

# ============================================
# Watchdog Configuration (Level 2)
# ============================================

# HTTP request timeout in seconds (default: 5)
OPENCLAW_WATCHDOG_HEALTH_TIMEOUT=5

# Maximum restart retries before Level 3 escalation (default: 6)
OPENCLAW_WATCHDOG_MAX_RETRIES=6

# Crash counter auto-reset in hours (default: 6)
OPENCLAW_WATCHDOG_CRASH_DECAY_HOURS=6

# Memory warning threshold in MB (default: 1536 = 1.5GB)
OPENCLAW_WATCHDOG_MEMORY_WARN_MB=1536

# Memory critical threshold in MB (default: 2048 = 2GB)
OPENCLAW_WATCHDOG_MEMORY_CRITICAL_MB=2048

# Level 3 escalation delay in seconds (default: 1800 = 30 minutes)
# After this many seconds of continuous failure, trigger Claude AI recovery
OPENCLAW_WATCHDOG_ESCALATE_TO_L3_AFTER=1800

# ============================================
# Health Check Configuration (Level 2)
# ============================================

# Maximum number of restart retries before escalation (default: 3)
HEALTH_CHECK_MAX_RETRIES=3

# Delay between retries in seconds (default: 30)
HEALTH_CHECK_RETRY_DELAY=30

# Wait time before Level 3 escalation in seconds (default: 300 = 5 minutes)
HEALTH_CHECK_ESCALATION_WAIT=300

# ============================================
# Emergency Recovery Configuration (Level 3)
# ============================================

# Claude Code recovery timeout in seconds (default: 1800 = 30 minutes)
EMERGENCY_RECOVERY_TIMEOUT=1800

# Claude workspace trust prompt timeout in seconds (default: 10)
CLAUDE_WORKSPACE_TRUST_TIMEOUT=10

# Claude startup wait in seconds (default: 5)
CLAUDE_STARTUP_WAIT=5

# Workspace trust confirm wait in seconds (default: 3)
WORKSPACE_TRUST_CONFIRM_WAIT=3

# ============================================
# Emergency Monitor Configuration (Level 4)
# ============================================

# Alert window in minutes (default: 30)
EMERGENCY_ALERT_WINDOW=30
